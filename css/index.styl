@require "variables"
@require "mixins"
@require "normalize.css"
@require 'font'
@require "crt"
@require "turn-on"

html, body
  height: 100%
  min-height: 654px
  overflow: hidden
  font: 8px/10px 'gamefont'
  margin: 0

body
  user-select: none
  background: url(../pics/background.png) top left \/ 200px 200px
  &:before
    content: ''
    text-align: center
    position: absolute
    left: 0
    top: 0
    right: 0
    bottom: 0
    background: #000
    z-index: 1000
  &:after
    content: 'Loading...'
    position: absolute
    text-align: center
    top: 50%
    width: 100%
    margin-top: -10px
    z-index: 2000
    color: #fff
  &.on:before
  &.on:after
    display: none

#last-comment-wrapper
.comment-wrapper
  display: none

#computer
  size: 487px 737px
  background: url(../pics/foreground.png?v=1) top left \/ @width @height no-repeat
  position: absolute
  left: 50%
  margin-left: (-@width/2)
  bottom: -90px
  overflow: hidden

.stage
#screen
  display: none

.on.compute-on
  #screen
    display: block
  &[data-state="title"]
    #stage-title
      cursor: pointer
      display: block

  &[data-state="main"]
    #last-comment-wrapper
    .comment-wrapper
    #stage-main
      display: block

  &[data-state="dead"]
    #last-comment-wrapper
    .comment-wrapper
    #stage-dead
      display: block

#screen-wrapper
  overflow: hidden
  size: $screenWidth $screenHeight
  background: $colorScreen
  margin: 48px auto 0

#screen
  background: $colorScreen
  padding: 6px
  height: ($screenHeight - @padding*2)
  color: $colorScreenText
  overflow: hidden
  position: relative
  word-wrap: break-word
  word-break: break-word
  &:before
    content: ''
    border: 1px solid #fff
    position: absolute
    left: 2px
    top: @left
    right: @left
    bottom: @left
    
  &:after
    content: ''
    border: 1px solid #fff
    position: absolute
    left: 0
    top: @left
    right: @left
    bottom: @left
    z-index: -1
  a
    color: @color
    text-decoration: none
  .progress-overlay
  .progress-bar
    z-index: 0
    position: absolute
  .progress-overlay
    top: 3px
    left: @top
    right: @top
    bottom: @top
    overflow: hidden
  .progress-bar
    top: 0
    left: @top
    right: @top
    bottom: @top
  .progress-overlay
    background: #fff
  .progress-bar
    background: #000
    transition: transform 0.2s

.stage
  z-index: 1
#title
.btn-start
  position: relative
#title
  size: 213px 121px
  background: url(../pics/title1.png) left top \/ @width @height no-repeat
  margin: 10px auto 0

@keyframes fade-inout
  0%
    opacity: 0
  50%
    opacity: 1
  100%
    opacity: 0

.btn-start
  display: block
  size: 167px 8.5px
  background: url(../pics/title2.png) left top \/ @width @height no-repeat
  margin: 20px auto
  animation: 4s fade-inout ease-in-out infinite

.stage
  z-index: 1
#stage-title
#stage-dead
  text-align: center

#last-comment-wrapper
  white-space: pre-line
  position: absolute
  bottom: 10px

#welcome
  white-space: pre-line
  p
    margin: -11px 0 10px

.comment-wrapper
  background: #000
  border: 1px solid #fff
  position: absolute
  bottom: 2px
  left: 2px
  right: @left
  input[name="comment"]
    color: #fff
    outline: none
    padding: 1px 2px
    background: #000
    border: none
    width: 100%
    box-sizing: border-box
    font: 8px/10px 'gameFont'
    &:focus::placeholder
      color: transparent
    &::placeholder
      color: @color

#stage-dead
  #end-title
    margin: 10px 0 0
    font-size: 20px
    line-height: 20px
    white-space: pre-line
  #end-word
    margin: 8px 0 0
    white-space: pre-line
